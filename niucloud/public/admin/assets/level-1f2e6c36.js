import{d as D,x as R,f as $,n as S,r as j,bF as U,h as m,c as p,e as t,w as o,a as c,t as s,u as r,i as v,q as a,R as q,s as G,F as f,T as x,B as k,bG as I,a5 as K,E as W,K as Y,L as A,M as H,a7 as J,ad as O,ae as Q,W as X,Y as Z}from"./index-b105d502.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                     *//* empty css                  */import{K as ee,L as te}from"./member-7c80ec62.js";const ae={class:"main-container"},le={class:"flex justify-between items-center"},ne={class:"text-page-title"},oe={class:"mt-[10px]"},re={key:0},ie={key:0},se={class:"mt-[16px] flex justify-end"},Pe=D({__name:"level",setup(me){const C=R(),b=$(),E=C.meta.title,e=S({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{level_name:""}}),h=j(),L=i=>{i&&(i.resetFields(),u())},u=(i=1)=>{e.loading=!0,e.page=i,ee({page:e.page,limit:e.limit,...e.searchParam}).then(l=>{e.loading=!1,e.data=l.data.data,e.total=l.data.total,I(e.page,e.limit,e.searchParam)}).catch(()=>{e.loading=!1})};u(U(e.searchParam).page);const P=()=>{b.push({path:"/member/level_edit"})},B=i=>{b.push({path:"/member/level_edit",query:{id:i.level_id}})},T=i=>{K.confirm(a("memberLevelDeleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{te(i).then(()=>{u()}).catch(()=>{})})};return(i,l)=>{const g=W,F=Y,y=A,N=H,w=J,_=O,M=Q,V=X,z=Z;return m(),p("div",ae,[t(w,{class:"box-card !border-none",shadow:"never"},{default:o(()=>[c("div",le,[c("span",ne,s(r(E)),1),t(g,{type:"primary",onClick:P},{default:o(()=>[v(s(r(a)("addMemberLevel")),1)]),_:1})]),t(w,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:o(()=>[t(N,{inline:!0,model:e.searchParam,ref_key:"searchFormRef",ref:h},{default:o(()=>[t(y,{label:r(a)("levelName"),prop:"level_name"},{default:o(()=>[t(F,{modelValue:e.searchParam.level_name,"onUpdate:modelValue":l[0]||(l[0]=n=>e.searchParam.level_name=n),modelModifiers:{trim:!0},placeholder:r(a)("levelNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(y,null,{default:o(()=>[t(g,{type:"primary",onClick:l[1]||(l[1]=n=>u())},{default:o(()=>[v(s(r(a)("search")),1)]),_:1}),t(g,{onClick:l[2]||(l[2]=n=>L(h.value))},{default:o(()=>[v(s(r(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c("div",oe,[q((m(),G(M,{data:e.data,size:"large"},{empty:o(()=>[c("span",null,s(e.loading?"":r(a)("emptyData")),1)]),default:o(()=>[t(_,{prop:"level_name",label:r(a)("levelName"),"min-width":"120"},null,8,["label"]),t(_,{prop:"growth",label:r(a)("growth"),"min-width":"120"},null,8,["label"]),t(_,{label:r(a)("levelBenefits"),"min-width":"120","show-overflow-tooltip":!0},{default:o(({row:n})=>[c("div",null,[(m(!0),p(f,null,x(n.level_benefits,d=>(m(),p(f,null,[d.content?(m(),p("div",re,s(d.content),1)):k("",!0)],64))),256))])]),_:1},8,["label"]),t(_,{label:r(a)("levelGifts"),"min-width":"120"},{default:o(({row:n})=>[c("div",null,[(m(!0),p(f,null,x(n.level_gifts,d=>(m(),p(f,null,[d.content?(m(),p("div",ie,s(d.content),1)):k("",!0)],64))),256))])]),_:1},8,["label"]),t(_,{prop:"member_num",label:r(a)("memberNumber"),"min-width":"120"},null,8,["label"]),t(_,{label:r(a)("operation"),align:"right",fixed:"right",width:"130"},{default:o(({row:n})=>[t(g,{type:"primary",link:"",onClick:d=>B(n)},{default:o(()=>[v(s(r(a)("edit")),1)]),_:2},1032,["onClick"]),t(g,{type:"primary",link:"",onClick:d=>T(n.level_id)},{default:o(()=>[v(s(r(a)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[z,e.loading]]),c("div",se,[t(V,{"current-page":e.page,"onUpdate:current-page":l[3]||(l[3]=n=>e.page=n),"page-size":e.limit,"onUpdate:page-size":l[4]||(l[4]=n=>e.limit=n),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:l[5]||(l[5]=n=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1})])}}});export{Pe as default};
