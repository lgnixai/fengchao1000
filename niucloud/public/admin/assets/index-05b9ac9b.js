import{d as q,r as h,j as D,k as O,l as G,m as H,n as j,q as i,s as b,w as u,v as J,x as W,y as Q,z as X,h as t,a,c as l,u as n,A as M,F as P,B as d,t as c,e as o,C as F,i as B,f as Y,D as Z,G as ee,H as se,I as te,S as ae,J as le,K as oe,L as ne,E as re,M as ie,N as ue}from"./index-b105d502.js";import de from"./Verify-464740c5.js";/* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                        */import"./VerifySlide-daaa091d.js";import"./index-3a023442.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./VerifyPoints-6e03b86d.js";const ce=""+new URL("login_index_left-1a48499b.png",import.meta.url).href,pe=""+new URL("site_login_bg-ec9595f0.png",import.meta.url).href,me={class:"flex rounded-2xl shadow overflow-hidden"},_e={class:"login-main-left w-[450px] flex flex-wrap justify-center"},fe={key:1,src:ce,alt:""},ge={class:"login flex flex-col w-[400px] h-[400px] p-[40px]"},ve={class:"text-center text-2xl mb-[26px]"},he={class:"flex overflow-hidden h-screen w-full relative"},ye=["src"],xe={key:1,class:"hidden h-[100%] lg:block",src:pe},we={class:"w-[100%] lg:w-[60%] h-screen flex flex-col absolute right-0 top-0 bg-[#F8FAFF]"},ke={class:"flex justify-center items-center flex-1 h-0"},be={class:"site-login-item w-[400px] h-[380px] p-[40px] rounded-2xl shadow bg-[#fff]"},Fe={class:"text-3xl mb-[30px]"},Ve={key:0,class:"flex items-center justify-center mt-[20px] pb-[20px] text-sm text-[#999]"},Ce=["href"],Re={key:0,class:"mr-3"},Ee={key:1,class:"mr-3"},Se={key:0,href:"https://beian.miit.gov.cn/",target:"_blank"},Le={class:"mr-3"},Ue=["href"],Ie={class:"mr-3"},Te={key:2,class:"flex items-center justify-center mt-[20px] pb-[20px] text-sm text-[#999]"},je=["href"],Me={key:0,class:"mr-3"},Pe={key:1,class:"mr-3"},Be={key:0,href:"https://beian.miit.gov.cn/",target:"_blank"},Ke={class:"mr-3"},Ne=["href"],$e={class:"mr-3"},es=q({__name:"index",setup(ze){const v=h(!1),w=h(!1),K=D(),V=W(),C=Y(),s=h(null);O().then(({data:m})=>{s.value=m}),V.redirectedFrom&&(V.query.redirect=V.redirectedFrom.path);const N=G(()=>Z().website),_=h(H()),R=h(null),$=m=>{S({captcha_code:m.captchaVerification})},p=j({username:"",password:""}),f=h(null);(async()=>{w.value=!0;const m=await(await Q()).data;f.value=m,w.value=!1})();const g=h(),E=j({username:[{required:!0,message:i("userPlaceholder"),trigger:"blur"}],password:[{required:!0,message:i("passwordPlaceholder"),trigger:"blur"}]}),y=async m=>{v.value||!m||await m.validate((e,L)=>{e&&(parseInt(f.value.is_captcha)&&_.value=="admin"||parseInt(f.value.is_site_captcha)&&_.value=="site"?R.value.show():S())})},S=(m={})=>{v.value=!0,K.login({username:p.username,password:p.password,...m},_.value).then(e=>{ee.set({key:"app_type",data:_.value}),_.value=="admin"&&se.empty(e.data.userrole)?C.push("/home/index"):C.push({name:_.value=="admin"?te.children[0].name:ae.children[0].name})}).catch(()=>{v.value=!1})};return(m,e)=>{const L=le,k=oe,x=ne,U=re,I=ie,T=ue,z=de,A=X;return t(),b(A,{class:J(["w-full h-screen bg-page flex flex-col",{"login-wrap":_.value=="admin"},{"site-login-wrap":_.value=="site"}])},{default:u(()=>[_.value=="admin"?(t(),b(T,{key:0,class:"login-main items-center justify-center flex-1 h-0"},{default:u(()=>[a("div",me,[a("div",_e,[f.value?(t(),l(P,{key:0},[f.value.bg&&!w.value?(t(),b(L,{key:0,class:"w-[450px] h-[400px]",src:n(M)(f.value.bg),fit:"cover"},null,8,["src"])):(t(),l("img",fe))],64)):d("",!0)]),a("div",ge,[a("h3",ve,c(n(N).site_name||n(i)("siteTitle"))+c(n(i)("platform")),1),o(I,{model:p,ref_key:"formRef",ref:g,rules:E,class:"mt-[30px]"},{default:u(()=>[o(x,{prop:"username"},{default:u(()=>[o(k,{modelValue:p.username,"onUpdate:modelValue":e[0]||(e[0]=r=>p.username=r),modelModifiers:{trim:!0},placeholder:n(i)("userPlaceholder"),autocomplete:"off",onKeyup:e[1]||(e[1]=F(r=>y(g.value),["enter"])),class:"h-[40px]"},null,8,["modelValue","placeholder"])]),_:1}),o(x,{prop:"password",class:"mt-[30px]"},{default:u(()=>[o(k,{modelValue:p.password,"onUpdate:modelValue":e[2]||(e[2]=r=>p.password=r),modelModifiers:{trim:!0},placeholder:n(i)("passwordPlaceholder"),type:"password",autocomplete:"new-password",onKeyup:e[3]||(e[3]=F(r=>y(g.value),["enter"])),"show-password":!0,class:"h-[40px]"},null,8,["modelValue","placeholder"])]),_:1}),o(x,null,{default:u(()=>[o(U,{type:"primary",class:"mt-[30px] !h-[40px] w-full",onClick:e[4]||(e[4]=r=>y(g.value)),loading:v.value},{default:u(()=>[B(c(v.value?n(i)("logging"):n(i)("login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])]),_:1})):!w.value&&_.value=="site"?(t(),b(T,{key:1,class:"login-main w-full login-site-main items-center h-screen justify-evenly bg-[#F8FAFF]"},{default:u(()=>[a("div",he,[f.value?(t(),l(P,{key:0},[f.value.site_bg&&!w.value?(t(),l("img",{key:0,class:"hidden h-[100%] lg:block",src:n(M)(f.value.site_bg)},null,8,ye)):(t(),l("img",xe))],64)):d("",!0),a("div",we,[a("div",ke,[a("div",be,[a("h3",Fe,c(n(i)("siteLogin")),1),o(I,{model:p,ref_key:"formRef",ref:g,rules:E},{default:u(()=>[o(x,{prop:"username"},{default:u(()=>[o(k,{modelValue:p.username,"onUpdate:modelValue":e[5]||(e[5]=r=>p.username=r),modelModifiers:{trim:!0},onKeyup:e[6]||(e[6]=F(r=>y(g.value),["enter"])),autocomplete:"off",class:"h-[40px]",placeholder:n(i)("userPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),o(x,{prop:"password",class:"mt-[30px]"},{default:u(()=>[o(k,{type:"password",modelValue:p.password,"onUpdate:modelValue":e[7]||(e[7]=r=>p.password=r),modelModifiers:{trim:!0},onKeyup:e[8]||(e[8]=F(r=>y(g.value),["enter"])),autocomplete:"new-password","show-password":!0,class:"h-[40px]",placeholder:n(i)("passwordPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),o(x,null,{default:u(()=>[o(U,{type:"primary",class:"mt-[30px] !h-[40px] w-full",onClick:e[9]||(e[9]=r=>y(g.value)),loading:v.value},{default:u(()=>[B(c(v.value?n(i)("logging"):n(i)("login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])]),s.value?(t(),l("div",Ve,[a("a",{href:s.value.copyright_link,target:"_blank"},[s.value.copyright_desc?(t(),l("span",Re,c(s.value.copyright_desc),1)):d("",!0),s.value.company_name?(t(),l("span",Ee,c(s.value.company_name),1)):d("",!0)],8,Ce),s.value.icp?(t(),l("a",Se,[a("span",Le,c(s.value.icp),1)])):d("",!0),s.value.gov_record?(t(),l("a",{key:1,href:s.value.gov_url,target:"_blank"},[a("span",Ie,c(s.value.gov_record),1)],8,Ue)):d("",!0)])):d("",!0)])])]),_:1})):d("",!0),s.value&&_.value=="admin"?(t(),l("div",Te,[a("a",{href:s.value.copyright_link,target:"_blank"},[s.value.copyright_desc?(t(),l("span",Me,c(s.value.copyright_desc),1)):d("",!0),s.value.company_name?(t(),l("span",Pe,c(s.value.company_name),1)):d("",!0)],8,je),s.value.icp?(t(),l("a",Be,[a("span",Ke,c(s.value.icp),1)])):d("",!0),s.value.gov_record?(t(),l("a",{key:1,href:s.value.gov_url,target:"_blank"},[a("span",$e,c(s.value.gov_record),1)],8,Ne)):d("",!0)])):d("",!0),o(z,{onSuccess:$,mode:m.pop,captchaType:"blockPuzzle",imgSize:{width:"330px",height:"155px"},ref_key:"verifyRef",ref:R},null,8,["mode"])]),_:1},8,["class"])}}});export{es as default};
